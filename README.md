# DeepRolePlay: åŸºäºå¤šæ™ºèƒ½ä½“æ¶æ„çš„æ·±åº¦è§’è‰²æ‰®æ¼”ç³»ç»Ÿ

[English](README_en.md) | ä¸­æ–‡

## é¡¹ç›®æ¦‚è¿°

DeepRolePlay æ˜¯ä¸€ä¸ªçªç ´æ€§çš„å¤šæ™ºèƒ½ä½“è§’è‰²æ‰®æ¼”ç³»ç»Ÿï¼Œé€šè¿‡ Agent åä½œæœºåˆ¶å½»åº•è§£å†³ä¼ ç»Ÿå¤§è¯­è¨€æ¨¡å‹çš„è§’è‰²é—å¿˜é—®é¢˜ã€‚

DeepRolePlay é‡‡ç”¨å¤šæ™ºèƒ½ä½“åˆ†å·¥æ¶æ„ï¼š**è®°å¿†é—ªå›æ™ºèƒ½ä½“** + **æƒ…æ™¯æ›´æ–°æ™ºèƒ½ä½“** + **ä¸»å¯¹è¯æ¨¡å‹**ï¼Œè®© AI å‘Šåˆ«è§’è‰²é—å¿˜ï¼Œå®ç°çœŸæ­£è¿è´¯çš„è§’è‰²æ‰®æ¼”ã€‚

## ğŸš€ è§£å†³è§’è‰²æ‰®æ¼”æ ¸å¿ƒç—›ç‚¹

### ğŸ˜¤ ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Ÿ
- ğŸ¤– **AI çªç„¶å¿˜è®°è§’è‰²è®¾å®š**ï¼šæ˜æ˜æ˜¯æ³•å¸ˆå´æ‹¿èµ·äº†å‰‘
- ğŸ“– **å‰§æƒ…å‰åä¸ä¸€è‡´**ï¼šæ˜¨å¤©çš„é‡è¦æƒ…èŠ‚ä»Šå¤©å®Œå…¨ä¸è®°å¾—
- ğŸ’¸ **Token æ¶ˆè€—å·¨å¤§**ï¼šé•¿å¯¹è¯è´¹ç”¨é£æ¶¨ï¼Œä½“éªŒä¸­æ–­

### âœ… DeepRolePlay çš„è§£å†³æ–¹æ¡ˆ
- ğŸ§  **æ°¸ä¸é—å¿˜**ï¼šAgent è‡ªåŠ¨ç»´æŠ¤è§’è‰²è®°å¿†ï¼Œè®¾å®šæ°¸ä¹…ä¿æŒ
- ğŸ”„ **å‰§æƒ…è¿è´¯**ï¼šæ™ºèƒ½æƒ…æ™¯æ›´æ–°ï¼Œåƒä¸‡è½®å¯¹è¯ä¾ç„¶é€»è¾‘æ¸…æ™°  
- ğŸ’° **æˆæœ¬å¯æ§**ï¼šæƒ…æ™¯å‹ç¼©æŠ€æœ¯ï¼Œé•¿å¯¹è¯è´¹ç”¨é™ä½ 80%
- ğŸ“š **æ™ºèƒ½è”ç½‘**ï¼šé›†æˆ Wikipedia ç™¾ç§‘ï¼Œå…è´¹è‡ªåŠ¨è¡¥å…¨è§’è‰²èƒŒæ™¯å’Œæ•…äº‹è®¾å®š
- âš¡ **å³æ’å³ç”¨**ï¼š5åˆ†é’Ÿé›†æˆï¼ŒSillyTavern ç­‰å¹³å°ç›´æ¥ä½¿ç”¨

### âš–ï¸ æƒè¡¡ä¸ç¼ºç‚¹

ä¸ºäº†å®ç°ä»¥ä¸Šæ•ˆæœï¼Œæœ¬é¡¹ç›®å­˜åœ¨ä»¥ä¸‹ä»£ä»·ï¼Œè¯·åœ¨ä½¿ç”¨å‰çŸ¥æ‚‰ï¼š

- â±ï¸ **å“åº”æ—¶é—´å¢åŠ **ï¼šAgent å·¥ä½œæµéœ€è¦é¢å¤–å¤„ç†æ—¶é—´ï¼Œæ•´ä½“è€—æ—¶å¯èƒ½å¢åŠ  2-3 å€
- ğŸ’¸ **åˆæœŸ Token æ¶ˆè€—**ï¼šå¯¹è¯å‰å‡ è½®éœ€è¦å»ºç«‹æƒ…æ™¯çŠ¶æ€ï¼ŒToken æ¶ˆè€—å¯èƒ½ç•¥é«˜äºç›´æ¥è°ƒç”¨
- ğŸ”§ **ç³»ç»Ÿå¤æ‚åº¦**ï¼šç›¸æ¯”ç›´æ¥è°ƒç”¨ LLMï¼Œéœ€è¦é¢å¤–çš„æœåŠ¡éƒ¨ç½²å’Œç»´æŠ¤

**é€‚ç”¨åœºæ™¯**ï¼šå¦‚æœä½ è¿½æ±‚é•¿æœŸè¿è´¯çš„å¤§å‹è§’è‰²æ‰®æ¼”ä½“éªŒï¼Œä¸ä»‹æ„ç¨æ…¢çš„å“åº”é€Ÿåº¦ï¼Œé‚£ä¹ˆè¿™äº›ä»£ä»·æ˜¯å€¼å¾—çš„ã€‚

## ğŸ¯ å¦‚ä½•ä½¿ç”¨

### è¶…ç®€å•é›†æˆ
1. **å¯åŠ¨æœåŠ¡**ï¼šè¿è¡Œ `uv run python main.py`ï¼Œç³»ç»Ÿåœ¨ 6666 ç«¯å£å¯åŠ¨
2. **æ›´æ¢æ¥å£**ï¼šåœ¨ SillyTavernã€OpenWebUI ç­‰å¹³å°ä¸­ï¼š
   - å°† `base_url` æ”¹ä¸º `http://localhost:6666/v1`
   - API Key ä¿æŒä¸å˜ï¼ˆç›´æ¥é€ä¼ ç»™åç«¯æ¨¡å‹ï¼‰
3. **å¼€å§‹ä½¿ç”¨**ï¼šç«‹å³äº«å—æ— é—å¿˜çš„è§’è‰²æ‰®æ¼”ä½“éªŒï¼

### å…¼å®¹æ€§è¯´æ˜
- âœ… **å®Œå…¨å…¼å®¹ OpenAI API æ ¼å¼**ï¼šæ‰€æœ‰æ”¯æŒ OpenAI çš„å·¥å…·éƒ½èƒ½ç›´æ¥ä½¿ç”¨
- âœ… **æ”¯æŒä¸»æµæ¨¡å‹**ï¼šOpenAI GPTã€DeepSeekã€Claudeã€æœ¬åœ° Ollama ç­‰
- âœ… **åŒé‡é…ç½®**ï¼šAgent å’Œè½¬å‘ç›®æ ‡å¯ä½¿ç”¨ä¸åŒæ¨¡å‹ï¼Œæˆæœ¬ä¼˜åŒ–çµæ´»

## Agent å·¥ä½œåŸç†

ä¼ ç»Ÿå•ä¸€æ¨¡å‹çš„é—®é¢˜ï¼š**è§’è‰²é—å¿˜** â†’ **å‰§æƒ…æ–­è£‚** â†’ **ä½“éªŒå´©å**

DeepRolePlay çš„ Agent è§£å†³æ–¹æ¡ˆï¼š
- ğŸ” **è®°å¿†é—ªå›æ™ºèƒ½ä½“**ï¼šæ™ºèƒ½æ£€ç´¢å†å²å¯¹è¯å’Œå¤–éƒ¨çŸ¥è¯†
- ğŸ“ **æƒ…æ™¯æ›´æ–°æ™ºèƒ½ä½“**ï¼šå®æ—¶ç»´æŠ¤è§’è‰²çŠ¶æ€å’Œå‰§æƒ…è¿è´¯æ€§  
- ğŸ­ **ä¸»å¯¹è¯æ¨¡å‹**ï¼šåŸºäºå®Œæ•´ä¸Šä¸‹æ–‡ç”Ÿæˆè§’è‰²å›åº”

## å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚ -> HTTPä»£ç†æœåŠ¡
           |
           v
    è§¦å‘å·¥ä½œæµæ‰§è¡Œ
           |
    +------+------+
    |             |
    v             v
è®°å¿†é—ªå›      æƒ…æ™¯æ›´æ–°
æ™ºèƒ½ä½“        æ™ºèƒ½ä½“
    |             |
    +------+------+
           |
           v
    æ³¨å…¥æ›´æ–°çš„æƒ…æ™¯
           |
           v
    è½¬å‘è‡³ç›®æ ‡LLM
           |
           v
    è¿”å›å¢å¼ºå“åº”
```

## ä½¿ç”¨æ­¥éª¤

### ç¯å¢ƒè¦æ±‚

- Python 3.12
- UV è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨ï¼ˆæ¨èï¼‰

### 1. å®‰è£…é¡¹ç›®

```bash
git clone https://github.com/yourusername/deepRolePlay.git
cd deepRolePlay
uv venv --python 3.12
uv pip install -r requirements.txt
```

### 2. é…ç½®æœåŠ¡

ç¼–è¾‘ `config/config.yaml` æ–‡ä»¶ï¼Œ**æ¨èä½¿ç”¨ DeepSeekï¼ˆæ€§ä»·æ¯”æœ€é«˜ï¼‰**ï¼š

```yaml
# APIä»£ç†é…ç½® - è½¬å‘ç›®æ ‡
proxy:
  target_url: "https://api.deepseek.com/v1"   # æ¨è DeepSeekï¼Œæˆæœ¬ä½æ€§èƒ½å¥½
  api_key: "your-deepseek-api-key"            # DeepSeek API Key
  timeout: 30                                 # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

# æ™ºèƒ½ä½“é…ç½® - Agent ä½¿ç”¨çš„æ¨¡å‹  
agent:
  model: "deepseek-chat"                      # æ¨è DeepSeek Chatï¼Œç»æµå®æƒ 
  base_url: "https://api.deepseek.com/v1"    # å¯ä¸ä»£ç†ç›®æ ‡ä¸åŒ
  api_key: "your-deepseek-api-key"            # å¯ä½¿ç”¨ç›¸åŒæˆ–ä¸åŒçš„ API Key
  temperature: 0.1                            # ç”Ÿæˆæ¸©åº¦ï¼ˆ0-1ï¼‰
  max_iterations: 25                          # æœ€å¤§è¿­ä»£æ¬¡æ•°

# æƒ…æ™¯ç®¡ç†
scenario:
  file_path: "./scenarios/scenario.txt"      # æƒ…æ™¯æ–‡ä»¶è·¯å¾„
  update_enabled: true                        # æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ›´æ–°

# æœåŠ¡å™¨é…ç½®
server:
  host: "0.0.0.0"
  port: 6666
```

### 3. å¯åŠ¨æœåŠ¡

```bash
uv run python main.py
```

### 4. æ¥å…¥ä½¿ç”¨

å°†ä½ çš„ AI åº”ç”¨ï¼ˆSillyTavernã€OpenWebUI ç­‰ï¼‰çš„ API ç«¯ç‚¹æ”¹ä¸ºï¼š
```
http://localhost:6666/v1
```

ç³»ç»Ÿå°†è‡ªåŠ¨ï¼š
1. æ‹¦æˆªå¯¹è¯è¯·æ±‚
2. æ‰§è¡Œæ™ºèƒ½ä½“å·¥ä½œæµ
3. æ›´æ–°æƒ…æ™¯çŠ¶æ€
4. å°†å¢å¼ºçš„ä¸Šä¸‹æ–‡æ³¨å…¥è¯·æ±‚
5. è¿”å›æ›´å‡†ç¡®çš„è§’è‰²æ‰®æ¼”å“åº”

## æ”¯æŒçš„æ¨¡å‹

### ğŸ”Œ å…¨é¢å…¼å®¹ OpenAI æ ¼å¼ API
æœ¬é¡¹ç›®é‡‡ç”¨æ ‡å‡† OpenAI API æ ¼å¼ï¼Œæ”¯æŒæ‰€æœ‰å…¼å®¹çš„æœåŠ¡å•†ï¼š

- **ğŸŒŸ DeepSeek**ï¼ˆå¼ºçƒˆæ¨èï¼‰ï¼šæ€§ä»·æ¯”æœ€é«˜ï¼Œè§’è‰²æ‰®æ¼”æ•ˆæœå‡ºè‰²
- **ğŸ’» æœ¬åœ° Ollama**ï¼šå®Œå…¨ç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ•°æ®å®‰å…¨

### âš ï¸ ä¸æ¨è OpenAI å®˜æ–¹ API
è™½ç„¶å®Œå…¨å…¼å®¹ OpenAI æ ¼å¼ï¼Œä½†**ä¸å»ºè®®ä½¿ç”¨ OpenAI å®˜æ–¹æœåŠ¡**ï¼š
- ğŸ”’ **è¿‡åº¦å®‰å…¨ç­–ç•¥**ï¼šå¯¹è§’è‰²æ‰®æ¼”å†…å®¹é™åˆ¶ä¸¥æ ¼ï¼Œå½±å“ä½“éªŒ


## å‚è€ƒæ–‡çŒ®

æœ¬é¡¹ç›®çš„è®¾è®¡ç†å¿µå—åˆ°ä»¥ä¸‹ç ”ç©¶çš„å¯å‘ï¼š

- [Building effective agents](https://www.anthropic.com/research/building-effective-agents) - Anthropic
- [LangGraph Documentation](https://python.langchain.com/docs/langgraph) - LangChain

## è®¸å¯è¯

MIT License
